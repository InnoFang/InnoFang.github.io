<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="指针，数组，函数那些容易混淆的概念"><meta name="keywords" content="C语言"><meta name="author" content="Inno Fang"><meta name="copyright" content="Inno Fang"><title>指针，数组，函数那些容易混淆的概念 | Inno' Blog</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="Inno' Blog" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E5%92%8C%E6%95%B0%E7%BB%84"><span class="toc-number">1.</span> <span class="toc-text">指针和数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84"><span class="toc-number">1.1.</span> <span class="toc-text">指针数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88"><span class="toc-number">1.2.</span> <span class="toc-text">数组指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E5%92%8C%E5%87%BD%E6%95%B0"><span class="toc-number">2.</span> <span class="toc-text">指针和函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E5%87%BD%E6%95%B0"><span class="toc-number">2.1.</span> <span class="toc-text">指针函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88"><span class="toc-number">2.2.</span> <span class="toc-text">函数指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number">2.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88%EF%BC%8C%E6%95%B0%E7%BB%84%EF%BC%8C%E5%87%BD%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text">指针，数组，函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84"><span class="toc-number">3.1.</span> <span class="toc-text">函数指针数组</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://avatars0.githubusercontent.com/u/15724026?s=400&amp;u=ee5d1bee0d44d91b01465f82910464fda54b91cc&amp;v=4"></div><div class="author-info__name text-center">Inno Fang</div><div class="author-info__description text-center">Programming is an art form</div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/InnoFang">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">64</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">17</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">17</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友链 / links</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://wmpscc.github.io/">HeoLis</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="http://barackbao.com/">Brarack Bao</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://wanghao15536870732.github.io/">HyYyr Wang</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://www.ingernotes.cn/">Inger Chao</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://www.angus-liu.cn/">Angus Liu 's Blog</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(http://ww1.sinaimg.cn/large/0067fiZ7ly1g1i7dcjttgj30zk0k8wif.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Inno' Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/gallery">Gallery</a><a class="site-page" href="/about">About</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">指针，数组，函数那些容易混淆的概念</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-02-21</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/C%E8%AF%AD%E8%A8%80/">C语言</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>无论对C还是C++，指针都是其精华所在，但是也是难点所在，本文是为了梳理一些在指针，数组，函数三者中那些容易混淆的概念</p>
<ul>
<li>指针数组</li>
<li>数组指针</li>
<li>指针函数</li>
<li>函数指针</li>
<li>函数指针数组</li>
</ul>
<span id="more"></span>

<h2 id="指针和数组"><a href="#指针和数组" class="headerlink" title="指针和数组"></a>指针和数组</h2><h3 id="指针数组"><a href="#指针数组" class="headerlink" title="指针数组"></a>指针数组</h3><p>定义：<code>datatype *arr[length]</code></p>
<p>指针数组，即在这个数组内，元素都是指针，那么length即数组内包含的指针个数，而指针的类型则跟datatype有关</p>
<p>举个例子，定义一个字符指针数据，然后访问内部元素</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">char</span> *arr[] =&#123; <span class="comment">// 指针数组</span></span><br><span class="line">	<span class="string">&quot;computer&quot;</span>,</span><br><span class="line">	<span class="string">&quot;science&quot;</span>,</span><br><span class="line">	<span class="string">&quot;and&quot;</span>,</span><br><span class="line">	<span class="string">&quot;technology&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, arr[<span class="number">0</span>]); <span class="comment">// output : computer</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, arr[<span class="number">1</span>]); <span class="comment">// output : science</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, arr[<span class="number">2</span>]); <span class="comment">// output : and</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, arr[<span class="number">3</span>]); <span class="comment">// output : technology</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>, *arr[<span class="number">0</span>]);<span class="comment">// output : c</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>, *(arr[<span class="number">0</span>] + <span class="number">1</span>));<span class="comment">// output : o</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>, *(*(arr + <span class="number">0</span>) + <span class="number">2</span>));<span class="comment">// output : m</span></span><br></pre></td></tr></table></figure>

<p>在这里能看出来，字符串格式化输出数组元素时，都能打印出对应的字符串，说明指针数组内部元素都是对应类型的指针，并且在下面的代码中，还利用了对应的指针获取对应元素。</p>
<h3 id="数组指针"><a href="#数组指针" class="headerlink" title="数组指针"></a>数组指针</h3><p>定义：<code>datatype (*arr)[length]</code></p>
<p>数组指针，其实就是一个指针，一般用于指向二维数组的首地址，datatype即数组指针的类型，而这里的length可以比作“列数”，即跟指向的二维数组的列数要相等。并且这里添加了一个括号的原因是<code>[]</code>的优先级比<code>*</code>高，所以这里的括号不能省略，否则意义就不同了</p>
<p>举个例子，定义一个二维整型数组和整型数组指针，让数组指针指向该二维数组，并访问数据</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">int</span> nums[][<span class="number">3</span>] = &#123;</span><br><span class="line">	<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,</span><br><span class="line">	<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>,</span><br><span class="line">	<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> (*arr)[<span class="number">3</span>]; <span class="comment">// 数组指针</span></span><br><span class="line">arr = nums;    <span class="comment">// 数组指针指向二维数组</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, arr[<span class="number">0</span>]);			<span class="comment">// output : 10485280</span></span><br><span class="line"><span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, *(arr[<span class="number">0</span>] + <span class="number">0</span>));  <span class="comment">// output : 1</span></span><br><span class="line"><span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, arr[<span class="number">0</span>][<span class="number">1</span>]);     <span class="comment">// output : 2</span></span><br><span class="line"><span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, *(*(arr + <span class="number">0</span>) + <span class="number">2</span>));  <span class="comment">// output : 3</span></span><br></pre></td></tr></table></figure>
<p>从上面代码可以看到，数组指针可以直接指向同类型的二维数组，并且在使用时完全可以像一个二维数组一样获取二维数组的数据</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>经过上面的分析可以看出数组指针和指针数组的不同了</p>
<ul>
<li>从定义上，指针数组是一个内部含有若干指针的数组，而数组指针则是一个指针</li>
<li>当有一个二维数组时，同类型的数组指针可以用来直接指向，但是同类型的指针数组则不行<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">int</span> nums[][<span class="number">3</span>] = &#123;</span><br><span class="line">	<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,</span><br><span class="line">	<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>,</span><br><span class="line">	<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> *p[<span class="number">3</span>];</span><br><span class="line"><span class="keyword">int</span> (*q)[<span class="number">3</span>];</span><br><span class="line">q = nums;	<span class="comment">// 数组指针指向二维数组</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)&#123;<span class="comment">// 将二维数组的值赋给指针数组</span></span><br><span class="line">	p[i] = nums[i];    <span class="comment">// 指针数组内的每个指针指向二维数组对应行的首地址</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="指针和函数"><a href="#指针和函数" class="headerlink" title="指针和函数"></a>指针和函数</h2><h3 id="指针函数"><a href="#指针函数" class="headerlink" title="指针函数"></a>指针函数</h3><p>定义：<code>返回值类型 * 函数名(形参列表)</code></p>
<p>指针函数：即返回值是指针的函数，本质还是函数，只不过返回值是一个指针</p>
<p>举个例子：创建一个学生结构体，然后创建一个指针函数用来创建学生信息，然后再主函数打印输出学生信息</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">10</span>];</span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line">&#125; Student;</span><br><span class="line"><span class="function">Student* <span class="title">createInfo</span><span class="params">(<span class="keyword">char</span> name[], <span class="keyword">int</span> age)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Student *student = (Student*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Student));</span><br><span class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == student)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">	<span class="built_in">strcpy</span>(student-&gt;name, name);</span><br><span class="line">	student-&gt;age = age;</span><br><span class="line">	<span class="keyword">return</span> student;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Student *student = createInfo(<span class="string">&quot;ZhangSan&quot;</span>, <span class="number">19</span>);</span><br><span class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == student)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Create failed&quot;</span>);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	    <span class="built_in">printf</span>(<span class="string">&quot;Student&#x27;s name is %s, age is %d\n&quot;</span>, student-&gt;name, student-&gt;age); <span class="comment">// output : Student&#x27;s name is ZhangSan, age is 19</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上面代码中，可以看到，在主函数中，传入对应的值并调用<code>createInfo</code>函数，该函数(在开辟空间成功的情况下)就会返回一个带有对应信息的Student类型的指针变量，那么就可以利用该指针变量访问数据</p>
<h3 id="函数指针"><a href="#函数指针" class="headerlink" title="函数指针"></a>函数指针</h3><p>定义：<code>类型 (* 指针名)(形参列表)</code></p>
<p>函数指针：仍然是一个指针，只不过是一个指向函数入口地址的指针</p>
<p>这里要说明的是，每一个函数无论是否带返回值或者形参列表，它都有一个对应的入口地址，当用函数指针指向函数时，两者的函数原型必须相一致，即返回值类型和形参列表都必须一致</p>
<p>例如我们需要一个返回值为整型的，参数为两个整型的函数指针时，只需做出如下声明即可：<br><code>int (*fun)(int x, int y);</code><br>当我们需要让函数指针指向特定函数时，</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">do</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123; ... &#125; <span class="comment">// do函数，函数原型与fun函数指针相一致</span></span><br><span class="line">... <span class="comment">// 代码省略</span></span><br><span class="line">fun = <span class="keyword">do</span>; <span class="comment">// 让函数指针fun指向do函数的入口地址时，两者都不需要括号或者形参列表</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>当函数指针指向特定函数时，便可以做对应函数的操作了</p>
<p>举个例子：现在输入一个算式，二元加减运算，中间不带空格，然后输出运算结果</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">plus</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">minus</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x - y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> (*calc)(<span class="keyword">int</span> x, <span class="keyword">int</span> y); <span class="comment">// 函数指针</span></span><br><span class="line">	<span class="keyword">int</span> x, y, result;</span><br><span class="line">	<span class="keyword">char</span> o;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d%c%d&quot;</span>, &amp;x, &amp;o, &amp;y);<span class="comment">//输入算式，eg:1+2,4-3...</span></span><br><span class="line">	<span class="keyword">if</span>(o == <span class="string">&#x27;+&#x27;</span>)</span><br><span class="line">		calc = plus;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (o == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">		calc = minus;</span><br><span class="line">	result = (*calc)(x, y);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;= %d\n&quot;</span>, result);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输入输出<br><code>1+2</code>↙<br><code>= 3</code><br><code>4-3</code>↙<br><code>= 1</code></p>
<p>在使用时，一定要注意函数指针和所指向的函数，这两者的函数原型要一致</p>
<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><ul>
<li>指针函数是一个返回值是指针的函数，函数指针则是指向函数的指针</li>
</ul>
<h2 id="指针，数组，函数"><a href="#指针，数组，函数" class="headerlink" title="指针，数组，函数"></a>指针，数组，函数</h2><h3 id="函数指针数组"><a href="#函数指针数组" class="headerlink" title="函数指针数组"></a>函数指针数组</h3><p>定义：<code>类型 (*函数指针数组名[元素个数])(形参列表)</code></p>
<p>函数指针数组：一句话解释就是数组元素全是函数指针的数组</p>
<p>比如，定义一个类型为整型，有两个整型参数的函数指针数组<br><code>int (*fun[])(int x, int y);</code><br>相比于函数指针就是在名字的后面多了<code>[]</code><br>那么如何初始化呢？<br>其实跟普通数组的初始化是一样的，这里先假设有加，减，乘三个方法，并且函数原型与函数指针数组相一致</p>
<ul>
<li>先声明后赋值<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">int</span> (*fun[<span class="number">3</span>])(<span class="keyword">int</span> x, <span class="keyword">int</span> y); <span class="comment">// 声明函数指针数组</span></span><br><span class="line">fun[<span class="number">0</span>] = plus; <span class="comment">// 加法函数</span></span><br><span class="line">fun[<span class="number">1</span>] = minus;<span class="comment">// 减法函数</span></span><br><span class="line">fun[<span class="number">2</span>] = multiply;<span class="comment">// 乘法函数</span></span><br></pre></td></tr></table></figure></li>
<li>声明的同时赋值<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> (*fun[])(<span class="keyword">int</span> x, <span class="keyword">int</span> y)&#123;</span><br><span class="line">    plus,     <span class="comment">// 加法函数</span></span><br><span class="line">		minus,    <span class="comment">// 减法函数</span></span><br><span class="line">		multiply  <span class="comment">// 乘法函数</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>在使用的时候要记得带上下标，以及参数列表</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun[<span class="number">0</span>](x, y); <span class="comment">// 使用函数指针函数数组中的第一个函数</span></span><br></pre></td></tr></table></figure>

<p>下面接着举个例子:有三个函数分别为返回值为整型，有两个整型参数的加，减，乘函数，然后定义一个函数指针数组并初始化，最后计算6和4的加，减，乘的结果并输出</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">plus</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">minus</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x - y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">multiply</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x * y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> (*fun[])(<span class="keyword">int</span> x, <span class="keyword">int</span> y)&#123;</span><br><span class="line">	    plus,     <span class="comment">// 加法函数</span></span><br><span class="line">			minus,    <span class="comment">// 减法函数</span></span><br><span class="line">			multiply  <span class="comment">// 乘法函数</span></span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="keyword">int</span> x = <span class="number">6</span>, y = <span class="number">4</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;6 + 4 = %d\n&quot;</span>, fun[<span class="number">0</span>](x, y)); <span class="comment">// output : 6 + 4 = 10</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;6 - 4 = %d\n&quot;</span>, fun[<span class="number">1</span>](x, y)); <span class="comment">// output : 6 - 4 = 2</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;6 * 4 = %d\n&quot;</span>, fun[<span class="number">2</span>](x, y)); <span class="comment">// output : 6 * 4 = 24</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>END.</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Inno Fang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://innofang.github.io/2017/02/21/%E6%8C%87%E9%92%88,%E6%95%B0%E7%BB%84,%E5%87%BD%E6%95%B0%E9%82%A3%E4%BA%9B%E5%AE%B9%E6%98%93%E6%B7%B7%E6%B7%86%E7%9A%84%E6%A6%82%E5%BF%B5/">http://innofang.github.io/2017/02/21/%E6%8C%87%E9%92%88,%E6%95%B0%E7%BB%84,%E5%87%BD%E6%95%B0%E9%82%A3%E4%BA%9B%E5%AE%B9%E6%98%93%E6%B7%B7%E6%B7%86%E7%9A%84%E6%A6%82%E5%BF%B5/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C%E8%AF%AD%E8%A8%80/">C语言</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2017/02/22/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BA%8C-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/"><i class="fa fa-chevron-left">  </i><span>设计模式(二):建造者模式</span></a></div><div class="next-post pull-right"><a href="/2017/02/19/SQLite%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"><span>SQLite的简单使用</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(http://ww1.sinaimg.cn/large/0067fiZ7ly1g1i7dcjttgj30zk0k8wif.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2017 - 2022 By Inno Fang</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Programming is an art form.</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>